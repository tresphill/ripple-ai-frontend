(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[439],{5713:function(e,t,r){Promise.resolve().then(r.bind(r,1369))},1369:function(e,t,r){"use strict";r.r(t);var s=r(7437),n=r(2265),a=r(2173),o=r(4008),i=r(4033);r(5425);var l=r(3771),c=r(6872),u=r(8730);t.default=function(){let[e,t]=(0,n.useState)(""),[r,d]=(0,n.useState)(""),{state:h,dispatch:f}=(0,o.useGlobalState)();(0,i.useRouter)(),(0,n.useEffect)(()=>{(()=>{let e=localStorage.getItem("user");if(e){let t=(0,l.o)(e);console.log("User data:",t),f({type:"SET_USER",payload:t})}})()},[]);let p=async e=>{e.preventDefault(),console.log(r),await a.Z.post("https://8000-tresphill-rippleai2-gwyip31yybf.ws-us106.gitpod.io/api/v1/openai_endpoints/stream?human_input_str="+r,{human_input_str:r},{"Content-Type":"application/x-www-form-urlencoded"}).then(e=>{console.log(e.data),t(e.data)}).catch(e=>{console.log(e)}),d("")};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.default,{}),(0,s.jsxs)("div",{className:"relative flex flex-col min-h-screen max-w-7xl mx-auto text-xl flex-grow items-center justify-center",children:[(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,s.jsx)("div",{className:"bg-gradient-to-br from-orange-400 to-transparent rounded-full aspect-w-1 aspect-h-1 p-40 opacity-50 blur-md"})}),(0,s.jsxs)("div",{className:"relative text-white-400 py-5 z-10 justify-center text-center",children:[(0,s.jsx)("p",{children:e}),(0,s.jsx)("form",{onSubmit:p,children:(0,s.jsx)("input",{className:"bg-inherit border-none outline-none text-center justify-center",placeholder:"Type here...",value:r,onChange:e=>{d(e.target.value)}})})]})]}),(0,s.jsx)(u.Z,{})]})}},8730:function(e,t,r){"use strict";var s=r(7437);r(2265),t.Z=function(){return(0,s.jsx)("div",{children:(0,s.jsx)("footer",{class:"sticky bottom=0 bg-white rounded-lg shadow dark:bg-black mt-4 bottom-0 w-full",children:(0,s.jsxs)("div",{class:" max-w-screen-xl mx-auto p-4 md:py-8",children:[(0,s.jsxs)("div",{class:"sm:flex sm:items-center sm:justify-between",children:[(0,s.jsx)("a",{href:"#",class:"flex items-center mb-4 sm:mb-0 space-x-3 rtl:space-x-reverse",children:(0,s.jsxs)("span",{class:"self-center text-2xl font-semibold whitespace-nowrap dark:text-white",children:["RiPPLE.",(0,s.jsx)("span",{style:{color:"orange"},children:"ai"})]})}),(0,s.jsxs)("ul",{class:"flex flex-wrap items-center mb-6 text-sm font-medium text-gray-500 sm:mb-0 dark:text-gray-400",children:[(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:"/about",class:"hover:underline me-4 md:me-6",children:"About"})}),(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:"/privacy",class:"hover:underline me-4 md:me-6",children:"Privacy Policy"})}),(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:"/licensing",class:"hover:underline me-4 md:me-6",children:"Licensing"})}),(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:"/contact",class:"hover:underline",children:"Contact"})})]})]}),(0,s.jsx)("hr",{class:"my-6 border-gray-200 sm:mx-auto dark:border-gray-700 lg:my-8"}),(0,s.jsxs)("span",{class:"block text-sm text-gray-500 sm:text-center dark:text-gray-400",children:["\xa9 2023"," ",(0,s.jsxs)("a",{href:"https://flowbite.com/",class:"hover:underline",children:["RiPPLE.",(0,s.jsx)("span",{style:{color:"orange"},children:"ai"})]})]})]})})})}},6872:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return f}});var s=r(7437),n=r(2265),a=r(1396),o=r.n(a);r(5425);var i=r(4008),l=r(4033),c=r(4032),u=r(8872);class d{async getUserData(e,t){if(console.log({user_id:e}),void 0!=e)try{let r=await (0,u.Z)({url:c.T5+c.F4+"/"+e,method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer "+t}});if(r&&r.data)return r;throw console.error("Invalid response:",r),Error("Invalid response from the server")}catch(e){throw console.error("Error fetching user data:",e),e}}constructor(){this.getUserData=this.getUserData.bind(this)}}var h=new d,f=()=>{let{state:e,dispatch:t}=(0,i.useGlobalState)(),[r,a]=(0,n.useState)(),[c,u]=(0,n.useState)(e.user);return(0,n.useEffect)(()=>{let t=0;e.user&&(t=e.user.user_id),console.log({user_id:r,num:t})},[]),(0,n.useEffect)(()=>{if(0!=r){let t=async()=>{console.log(e);let t=await h.getUserData(r,e.user.access_token);u(t.data),console.log(t.data)};t().catch(console.error)}},[r]),(0,l.useRouter)(),(0,s.jsx)("nav",{className:"bg-zinc-800 p-4 fixed w-full z-50",children:(0,s.jsxs)("div",{className:"container mx-auto flex justify-between items-center",children:[(0,s.jsxs)(o(),{href:"/",className:"text-white text-5xl font-bold",children:["RiPPLE.",(0,s.jsx)("span",{style:{color:"orange"},children:"ai"})]}),e.user?(0,s.jsx)("div",{}):(0,s.jsx)(s.Fragment,{}),(0,s.jsxs)("div",{className:"space-x-8",children:[(0,s.jsx)(o(),{href:"/stories",className:"text-white hover:text-gray-300",children:"Stories"}),(0,s.jsx)(o(),{href:"/submissions",className:"text-white hover:text-gray-300",children:"Submissions"}),(0,s.jsx)(o(),{href:"/login",className:"text-white hover:text-gray-300",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0012 15.75a7.488 7.488 0 00-5.982 2.975m11.963 0a9 9 0 10-11.963 0m11.963 0A8.966 8.966 0 0112 21a8.966 8.966 0 01-5.982-2.275M15 9.75a3 3 0 11-6 0 3 3 0 016 0z"})})})]})]})})}},4008:function(e,t,r){"use strict";r.r(t),r.d(t,{GlobalStateProvider:function(){return l},useGlobalState:function(){return c}});var s=r(7437),n=r(2265);let a={user:null},o=(0,n.createContext)();function i(e,t){switch(t.type){case"SET_USER":return{...e,user:t.payload};case"LOGOUT_USER":return{...e,user:null};default:return e}}function l(e){let{children:t}=e,[r,l]=(0,n.useReducer)(i,a);return(0,s.jsx)(o.Provider,{value:{state:r,dispatch:l},children:t})}function c(){return(0,n.useContext)(o)}},8872:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var s=r(2173),n=r(4032);let a=s.Z.create({baseURL:n.T5,headers:{"Content-Type":"application/x-www-form-urlencoded"}});a.interceptors.response.use(e=>e,e=>{let t=e.config;if(401===e.response.status&&t.url===n.T5+n.Q)return window.location.href="/login/",Promise.reject(e);if("token_not_valid"===e.response.data.code&&401===e.response.status&&"Unauthorized"===e.response.statusText){let e=localStorage.getItem("user");if(e){let r=JSON.parse(atob(e.refresh.split(".")[1])),s=Math.ceil(Date.now()/1e3);if(console.log(r.exp),r.exp>s)return a.post(n.Q,{refresh:e.refresh}).then(e=>(localStorage.setItem("user",e.data),a.defaults.headers.Authorization="Bearer "+e.data.access,t.headers.Authorization="Bearer "+e.data.access,a(t))).catch(e=>{console.log(e)});console.log("Refresh token is expired",r.exp,s),window.location.href="/login/"}else console.log("Refresh token not available."),window.location.href="/login/"}return Promise.reject(e)});var o=e=>a({...e,headers:function(){let e={"Content-Type":"application/x-www-form-urlencoded"},t=JSON.parse(localStorage.getItem("user"));return t&&t.access&&(e.Authorization="Bearer "+t.access),e}()}).then(e=>(console.debug("Request Successful!",e),e)).catch(e=>(console.error("Request Failed:",e.config),e.response?(console.error("Status:",e.response.status),console.error("Data:",e.response.data),console.error("Headers:",e.response.headers)):console.error("Error Message:",e.message),Promise.reject(e.response||e.message)))},4032:function(e,t,r){"use strict";r.d(t,{F4:function(){return i},LW:function(){return n},Q:function(){return o},T5:function(){return s},bc:function(){return a}});let s="https://8000-tresphill-rippleai2-gwyip31yybf.ws-us106.gitpod.io/api/v1/",n="login/access-token",a="users/register/",o="token/refresh/",i="users"},5425:function(e,t,r){"use strict";var s=r(4032),n=r(8872);class a{async login(e,t){try{let r=await (0,n.Z)({url:s.T5+s.LW,method:"POST",data:{username:e,password:t}});if(r.data.access_token)return this.setToken(r)}catch(e){return e.response}}logout(){localStorage.removeItem("user")}async register(e){let{username:t,email:r,password:a}=e;try{return await (0,n.Z)({url:s.T5+s.bc,method:"POST",data:{username:t,password:a,email:r}})}catch(e){return e.response}}setToken(e){return localStorage.setItem("user",JSON.stringify(e.data)),e.data}async refreshToken(){try{let e=JSON.parse(localStorage.getItem("user"));if(e.refresh){let t=await (0,n.Z)({url:s.Q,method:"POST",data:{refresh:e.refresh}});return t.data}}catch(e){return e.response}}constructor(){this.login=this.login.bind(this)}}t.Z=new a},3771:function(e,t,r){"use strict";r.d(t,{o:function(){return n}});class s extends Error{}function n(e,t){let r;if("string"!=typeof e)throw new s("Invalid token specified: must be a string");t||(t={});let n=!0===t.header?0:1,a=e.split(".")[n];if("string"!=typeof a)throw new s(`Invalid token specified: missing part #${n+1}`);try{r=function(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw Error("base64 string is not of the correct length")}try{var r;return r=t,decodeURIComponent(atob(r).replace(/(.)/g,(e,t)=>{let r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}catch(e){return atob(t)}}(a)}catch(e){throw new s(`Invalid token specified: invalid base64 for part #${n+1} (${e.message})`)}try{return JSON.parse(r)}catch(e){throw new s(`Invalid token specified: invalid json for part #${n+1} (${e.message})`)}}s.prototype.name="InvalidTokenError"}},function(e){e.O(0,[879,971,472,744],function(){return e(e.s=5713)}),_N_E=e.O()}]);