"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[703],{8730:function(e,r,t){var s=t(7437);t(2265),r.Z=function(){return(0,s.jsx)("div",{children:(0,s.jsx)("footer",{class:"sticky bottom=0 bg-white rounded-lg shadow dark:bg-black mt-4 bottom-0 w-full",children:(0,s.jsxs)("div",{class:" max-w-screen-xl mx-auto p-4 md:py-8",children:[(0,s.jsxs)("div",{class:"sm:flex sm:items-center sm:justify-between",children:[(0,s.jsx)("a",{href:"#",class:"flex items-center mb-4 sm:mb-0 space-x-3 rtl:space-x-reverse",children:(0,s.jsxs)("span",{class:"self-center text-2xl font-semibold whitespace-nowrap dark:text-white",children:["RiPPLE.",(0,s.jsx)("span",{style:{color:"orange"},children:"ai"})]})}),(0,s.jsxs)("ul",{class:"flex flex-wrap items-center mb-6 text-sm font-medium text-gray-500 sm:mb-0 dark:text-gray-400",children:[(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:"/about",class:"hover:underline me-4 md:me-6",children:"About"})}),(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:"/privacy",class:"hover:underline me-4 md:me-6",children:"Privacy Policy"})}),(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:"/licensing",class:"hover:underline me-4 md:me-6",children:"Licensing"})}),(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:"/contact",class:"hover:underline",children:"Contact"})})]})]}),(0,s.jsx)("hr",{class:"my-6 border-gray-200 sm:mx-auto dark:border-gray-700 lg:my-8"}),(0,s.jsxs)("span",{class:"block text-sm text-gray-500 sm:text-center dark:text-gray-400",children:["\xa9 2023"," ",(0,s.jsxs)("a",{href:"https://flowbite.com/",class:"hover:underline",children:["RiPPLE.",(0,s.jsx)("span",{style:{color:"orange"},children:"ai"})]})]})]})})})}},6872:function(e,r,t){t.r(r),t.d(r,{default:function(){return f}});var s=t(7437),a=t(2265),n=t(1396),o=t.n(n);t(5425);var l=t(4008),i=t(4033),c=t(4032),u=t(8872);class d{async getUserData(e,r){if(console.log({user_id:e}),void 0!=e)try{let t=await (0,u.Z)({url:c.T5+c.F4+"/"+e,method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer "+r}});if(t&&t.data)return t;throw console.error("Invalid response:",t),Error("Invalid response from the server")}catch(e){throw console.error("Error fetching user data:",e),e}}constructor(){this.getUserData=this.getUserData.bind(this)}}var h=new d,f=()=>{let{state:e,dispatch:r}=(0,l.useGlobalState)(),[t,n]=(0,a.useState)(),[c,u]=(0,a.useState)(e.user);return(0,a.useEffect)(()=>{let r=0;e.user&&(r=e.user.user_id),console.log({user_id:t,num:r})},[]),(0,a.useEffect)(()=>{if(0!=t){let r=async()=>{console.log(e);let r=await h.getUserData(t,e.user.access_token);u(r.data),console.log(r.data)};r().catch(console.error)}},[t]),(0,i.useRouter)(),(0,s.jsx)("nav",{className:"bg-zinc-800 p-4 fixed w-full z-50",children:(0,s.jsxs)("div",{className:"container mx-auto flex justify-between items-center",children:[(0,s.jsxs)(o(),{href:"/",className:"text-white text-5xl font-bold",children:["RiPPLE.",(0,s.jsx)("span",{style:{color:"orange"},children:"ai"})]}),e.user?(0,s.jsx)("div",{}):(0,s.jsx)(s.Fragment,{}),(0,s.jsxs)("div",{className:"space-x-8",children:[(0,s.jsx)(o(),{href:"/stories",className:"text-white hover:text-gray-300",children:"Stories"}),(0,s.jsx)(o(),{href:"/submissions",className:"text-white hover:text-gray-300",children:"Submissions"}),(0,s.jsx)(o(),{href:"/login",className:"text-white hover:text-gray-300",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0012 15.75a7.488 7.488 0 00-5.982 2.975m11.963 0a9 9 0 10-11.963 0m11.963 0A8.966 8.966 0 0112 21a8.966 8.966 0 01-5.982-2.275M15 9.75a3 3 0 11-6 0 3 3 0 016 0z"})})})]})]})})}},5418:function(e,r,t){var s=t(7437),a=t(2265),n=t(3352),o=t(5675);r.Z=()=>{let e=(0,a.useCallback)(async e=>{await (0,o.S)(e)},[]),r=(0,a.useCallback)(async e=>{await console.log(e)},[]);return(0,s.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:-1},children:(0,s.jsx)(n.Z,{id:"tsparticles",init:e,loaded:r,options:{fullScreen:{enable:!0},background:{color:{value:"transparent"}},fpsLimit:120,interactivity:{events:{onClick:{enable:!0,mode:"push"},onHover:{enable:!0,mode:"repulse"},resize:!0},modes:{push:{quantity:4},repulse:{distance:150,duration:.4}}},particles:{color:{value:"#FFA500"},links:{color:"#ffffff",distance:150,enable:!0,opacity:.5,width:1},move:{direction:"none",enable:!0,outModes:{default:"bounce"},random:!1,speed:4,straight:!1},number:{density:{enable:!0,area:800},value:80},opacity:{value:.5},shape:{type:"circle"},size:{value:{min:1,max:5}}},detectRetina:!0}})})}},4008:function(e,r,t){t.r(r),t.d(r,{GlobalStateProvider:function(){return i},useGlobalState:function(){return c}});var s=t(7437),a=t(2265);let n={user:null},o=(0,a.createContext)();function l(e,r){switch(r.type){case"SET_USER":return{...e,user:r.payload};case"LOGOUT_USER":return{...e,user:null};default:return e}}function i(e){let{children:r}=e,[t,i]=(0,a.useReducer)(l,n);return(0,s.jsx)(o.Provider,{value:{state:t,dispatch:i},children:r})}function c(){return(0,a.useContext)(o)}},8872:function(e,r,t){t.d(r,{Z:function(){return o}});var s=t(2173),a=t(4032);let n=s.Z.create({baseURL:a.T5,headers:{"Content-Type":"application/x-www-form-urlencoded"}});n.interceptors.response.use(e=>e,e=>{let r=e.config;if(401===e.response.status&&r.url===a.T5+a.Q)return window.location.href="/login/",Promise.reject(e);if("token_not_valid"===e.response.data.code&&401===e.response.status&&"Unauthorized"===e.response.statusText){let e=localStorage.getItem("user");if(e){let t=JSON.parse(atob(e.refresh.split(".")[1])),s=Math.ceil(Date.now()/1e3);if(console.log(t.exp),t.exp>s)return n.post(a.Q,{refresh:e.refresh}).then(e=>(localStorage.setItem("user",e.data),n.defaults.headers.Authorization="Bearer "+e.data.access,r.headers.Authorization="Bearer "+e.data.access,n(r))).catch(e=>{console.log(e)});console.log("Refresh token is expired",t.exp,s),window.location.href="/login/"}else console.log("Refresh token not available."),window.location.href="/login/"}return Promise.reject(e)});var o=e=>n({...e,headers:function(){let e={"Content-Type":"application/x-www-form-urlencoded"},r=JSON.parse(localStorage.getItem("user"));return r&&r.access&&(e.Authorization="Bearer "+r.access),e}()}).then(e=>(console.debug("Request Successful!",e),e)).catch(e=>(console.error("Request Failed:",e.config),e.response?(console.error("Status:",e.response.status),console.error("Data:",e.response.data),console.error("Headers:",e.response.headers)):console.error("Error Message:",e.message),Promise.reject(e.response||e.message)))},4032:function(e,r,t){t.d(r,{F4:function(){return l},LW:function(){return a},Q:function(){return o},T5:function(){return s},bc:function(){return n}});let s="https://8000-tresphill-rippleai2-gwyip31yybf.ws-us106.gitpod.io/api/v1/",a="login/access-token",n="users/register/",o="token/refresh/",l="users"},5425:function(e,r,t){var s=t(4032),a=t(8872);class n{async login(e,r){try{let t=await (0,a.Z)({url:s.T5+s.LW,method:"POST",data:{username:e,password:r}});if(t.data.access_token)return this.setToken(t)}catch(e){return e.response}}logout(){localStorage.removeItem("user")}async register(e){let{username:r,email:t,password:n}=e;try{return await (0,a.Z)({url:s.T5+s.bc,method:"POST",data:{username:r,password:n,email:t}})}catch(e){return e.response}}setToken(e){return localStorage.setItem("user",JSON.stringify(e.data)),e.data}async refreshToken(){try{let e=JSON.parse(localStorage.getItem("user"));if(e.refresh){let r=await (0,a.Z)({url:s.Q,method:"POST",data:{refresh:e.refresh}});return r.data}}catch(e){return e.response}}constructor(){this.login=this.login.bind(this)}}r.Z=new n}}]);